webpackJsonp([0],{0:function(t,e){},"69o7":function(t,e){},"6j1F":function(t,e){},DxP4:function(t,e){},JHp6:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={},n={name:"navbar",methods:{logout:function(){i.user={},localStorage.removeItem("jwt"),window.location.reload()},updateUser:function(){i.user?(this.loggedIn=!0,this.user=i.user):setTimeout(this.updateUser,200)}},data:function(){return{loggedIn:!!i.user,user:void 0}},created:function(){this.updateUser()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{on:{click:function(e){t.loggedIn=!0}}},[a("div",{staticClass:"nav-wrapper navbar"},[a("a",{staticClass:"brand-logo",attrs:{href:"/"}},[t._v("MAILER")]),t._v(" "),a("div",{staticClass:"navItem"},[t.loggedIn?a("ul",{staticClass:"right hide-on-med-and-down",attrs:{id:"nav-mobile"}},[a("li",{class:"/"==t.$route.path?"active":""},[a("router-link",{staticClass:"navLink",attrs:{to:"/"}},[t._v("All mails")])],1),t._v(" "),a("li",{class:"/new"==t.$route.path?"active":""},[a("router-link",{staticClass:"navLink",attrs:{to:"/new"}},[t._v("New")])],1),t._v(" "),a("li",{class:"/marked"==t.$route.path?"active":""},[a("router-link",{staticClass:"navLink",attrs:{to:"/marked"}},[t._v("Marked")])],1),t._v(" "),a("li",{class:"/spam"==t.$route.path?"active":""},[a("router-link",{staticClass:"navLink",attrs:{to:"/spam"}},[t._v("Spam")])],1),t._v(" "),a("li",{on:{click:function(e){return t.logout()}}},[a("router-link",{staticClass:"navLink",attrs:{to:"#"}},[t._v("Logout")])],1),t._v(" "),a("li",[a("div",{staticStyle:{margin:"0 0 0 20px"},attrs:{id:"email"}},[t._v(t._s(t.user.email+"@onyame.ml"))])])]):t._e()])])])])},staticRenderFns:[]};var r={name:"app-footer",data:function(){return{count:(new Date).getFullYear()}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("div",{staticClass:"copiright"},[this._v("Personal mail client ")]),this._v(" "),e("div",{staticClass:"copiright"},[this._v(" Copyright "+this._s(this.count)+" Â©")])])},staticRenderFns:[]};var c={name:"App",components:{Navbar:a("VU/8")(n,o,!1,function(t){a("JHp6")},"data-v-3f6f245a",null).exports,AppFooter:a("VU/8")(r,l,!1,function(t){a("69o7")},"data-v-3531a421",null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100vh",display:"flex","flex-direction":"column",overflow:"hidden"},attrs:{id:"app"}},[e("navbar"),this._v(" "),e("router-view"),this._v(" "),e("app-footer")],1)},staticRenderFns:[]},u=a("VU/8")(c,d,!1,null,null,null).exports,m=a("/ocq"),v={name:"login",data:function(){return{errors:{email:!1,password:!1,text:""},data:{email:"",password:""},loading:!1}},methods:{mailValidate:function(t){this.errors.email=!1,t.value?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]{2,}$/.test(t.value)?(t.classList.remove("invalid"),t.className+=" valid"):(t.classList.remove("valid"),t.className+=" invalid",this.errors.email=!0):(t.classList.remove("valid"),t.classList.remove("invalid"))},passwordValidate:function(t){this.errors.password=!1,t.value?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/.test(t.value)?(t.classList.remove("invalid"),t.className+=" valid"):(t.classList.remove("valid"),t.className+=" invalid",this.errors.password=!0):(t.classList.remove("valid"),t.classList.remove("invalid"))},onSubmit:function(){var t=this;if(!this.errors.email&&!this.errors.password&&this.data.email&&this.data.password){this.loading=!0;this.$http.post("/api/server_login",{email:this.data.email,password:this.data.password},{headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(e){t.loading=!1,e.body.jwt?(localStorage.setItem("jwt",e.body.jwt),localStorage.setItem("email",e.body.email),i.user=e.body,t.$router.push("/"),M.toast({html:"You are successfully logged in!"})):t.errors.text="*"+e.body.err})}}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("form",{staticClass:"login_form card-panel teal lighten-2"},[a("div",{staticClass:"title"},[t._v("Login:")]),t._v(" "),a("div",{staticClass:"input-field col s6",staticStyle:{margin:"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.email,expression:"data.email"}],staticStyle:{color:"rgb(71,69,84)"},attrs:{id:"login",type:"text"},domProps:{value:t.data.email},on:{input:[function(e){e.target.composing||t.$set(t.data,"email",e.target.value)},function(e){return t.mailValidate(e.target)}]}}),t._v(" "),a("label",{staticStyle:{color:"rgb(71,69,84)"},attrs:{for:"login"}},[t._v("Login")])]),t._v(" "),a("div",{staticClass:"input-field col s6",staticStyle:{margin:"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.password,expression:"data.password"}],staticStyle:{color:"rgb(71,69,84)"},attrs:{onblur:"",id:"password",type:"password"},domProps:{value:t.data.password},on:{input:[function(e){e.target.composing||t.$set(t.data,"password",e.target.value)},function(e){return t.passwordValidate(e.target)}]}}),t._v(" "),a("label",{staticStyle:{color:"rgb(71,69,84)"},attrs:{for:"password"}},[t._v("Password")])]),t._v(" "),t.errors.text?a("div",{staticClass:"danger"},[t._v(t._s(t.errors.text))]):t._e(),t._v(" "),a("div",{staticClass:"btn waves-effect waves-light submit",on:{click:function(e){return t.onSubmit()}}},[t._v("Submit\n      "),a("i",{staticClass:"material-icons right"},[t._v("send")])]),t._v(" "),t.loading?a("div",{staticClass:"progress"},[a("div",{staticClass:"indeterminate"})]):t._e()])])},staticRenderFns:[]};var p=a("VU/8")(v,g,!1,function(t){a("6j1F")},"data-v-e80346e8",null).exports,h={name:"app-main",data:function(){return{counter:1,msgData:[],countMsg:1,multiSelect:[],loading:!1}},created:function(){this.getMsgs()},computed:{maxPage:function(){var t=this.countMsg-this.countMsg%20;return t/=20,this.countMsg%20&&t++,t}},methods:{markAll:function(){for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].click()},addSelect:function(t){this.multiSelect.filter(function(e){return e==t})[0]?this.multiSelect=this.multiSelect.filter(function(e){return e!=t}):this.multiSelect.push(t)},reload:function(){this.counter=1,this.multiSelect=[],this.uncheckAll(),this.getMsgs(),document.getElementById("msgBox").scrollTop=0},clickLeft:function(){this.counter<=1||(this.counter--,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},clickRight:function(){this.counter>=this.maxPage||(this.counter++,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},getMsgs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0;var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-for":this.$route.params.id,"X-index":e.toString()};this.$http.get("/api/massages",{headers:a}).then(function(e){t.loading=!1,e.body&&(t.countMsg=e.body.lengthMsg,t.msgData=e.body.data)})},uncheckAll:function(){for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].checked=!1}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{staticClass:"row",staticStyle:{height:"100%",padding:"5px","box-shadow":"-1px 1px 2px rgba(0,0,0,0.2)"}},[a("div",{staticClass:"col s3 side"},[t._v("\n      main\n    ")]),t._v(" "),a("div",{staticClass:"col s9 page"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[a("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer","margin-right":"auto"},on:{click:t.markAll}},[a("i",{staticClass:"material-icons"},[t._v("done_all")])]),t._v(" "),a("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer"},on:{click:t.reload}},[a("i",{staticClass:"material-icons"},[t._v("refresh")])]),t._v(" "),a("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),a("div",{staticClass:"arrows"},[a("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),a("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])]),t._v(" "),t.loading?a("div",{staticClass:"progress"},[a("div",{staticClass:"indeterminate"})]):t._e(),t._v(" "),a("div",{staticClass:"massages",attrs:{id:"msgBox"}},t._l(t.msgData,function(e){return a("div",{staticStyle:{display:"flex",width:"100%","align-items":"center"}},[a("input",{staticClass:"checkboxMsg",attrs:{type:"checkbox"},domProps:{value:e.id?e.id:""},on:{click:function(e){return t.addSelect(e.target.value)}}}),t._v(" "),a("router-link",{staticClass:"msg",class:e.read?"read":"",attrs:{to:e.id?e.id:""}},[a("div",{staticClass:"msg-header"},[a("div",{staticClass:"header-item"},[t._v(t._s(e.from))]),t._v(" "),a("div",{staticClass:"header-item",staticStyle:{"text-align":"end",color:"rgb(16, 146, 232)"}},[t._v(t._s(e.date))])]),t._v(" "),a("div",{staticClass:"subj"},[t._v(t._s(e.subject))])])],1)}),0)])])])},staticRenderFns:[]};var _=a("VU/8")(h,f,!1,function(t){a("DxP4")},"data-v-2b03a82b",null).exports;var w=a("8+8L");s.a.use(m.a),s.a.use(w.a);var x=new m.a({mode:"history",routes:[{path:"/login",name:"login",component:p},{path:"/",name:"app-main",component:_},{path:"/mailbox/:id",name:"app-mailbox",component:_},{path:"/:id",name:"msg"},{path:"/mailboxes/:id",name:"mailbox",beforeEnter:function(t,e,a){var s,i,n;s="/api/get_admin",i=function(t){t.success?a(!0):a(!1)},(n=new XMLHttpRequest).onreadystatechange=function(){4==n.readyState&&200==n.status&&i(JSON.parse(n.responseText))},n.open("GET",s,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Authorization",localStorage.getItem("jwt")),n.send(null)}},{path:"*",name:"404",redirect:"/"}]});x.beforeEach(function(t,e,a){var s,n,o;"/login"!=t.fullPath||i.user||localStorage.getItem("jwt")?i.user&&!localStorage.getItem("jwt")?(i.user={},a("/login")):localStorage.getItem("jwt")&&i.user?"/login"==t.fullPath?a(e.fullPath):a(!0):localStorage.getItem("jwt")?(s="/api/authorization",n=function(s){s.success?(localStorage.setItem("email",s.user.email),i.user=s.user,"/login"==t.fullPath?"/login"==e.fullPath?a("/"):a(e.fullPath):a(!0)):(localStorage.removeItem("jwt"),a("/login"))},(o=new XMLHttpRequest).onreadystatechange=function(){4==o.readyState&&200==o.status&&n(JSON.parse(o.responseText))},o.open("GET",s,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization",localStorage.getItem("jwt")),o.send(null)):a("/login"):a(!0)});var y=x;s.a.config.productionTip=!1,new s.a({el:"#app",router:y,components:{App:u},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.f8d7d87f27b9ff08d6ba.js.map
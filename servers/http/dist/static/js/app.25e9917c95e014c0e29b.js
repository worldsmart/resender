webpackJsonp([0],{0:function(t,e){},"5g5+":function(t,e){},"69o7":function(t,e){},"6j1F":function(t,e){},BdqM:function(t,e){},F53Y:function(t,e){},JHp6:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),s={},n={name:"navbar",methods:{logout:function(){s.user={},localStorage.removeItem("jwt"),window.location.reload()},updateUser:function(){s.user?(this.loggedIn=!0,this.user=s.user):setTimeout(this.updateUser,200)}},data:function(){return{loggedIn:!!s.user,user:void 0}},created:function(){this.updateUser()}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("nav",{on:{click:function(e){t.loggedIn=!0}}},[i("div",{staticClass:"nav-wrapper navbar"},[i("a",{staticClass:"brand-logo",attrs:{href:"/"}},[t._v("MAILER")]),t._v(" "),i("div",{staticClass:"navItem"},[t.loggedIn?i("ul",{staticClass:"right hide-on-med-and-down",attrs:{id:"nav-mobile"}},[i("li",{class:"/"==t.$route.path?"active":""},[i("router-link",{staticClass:"navLink",attrs:{to:"/"}},[t._v("All mails")])],1),t._v(" "),i("li",{class:"/new"==t.$route.path?"active":""},[i("router-link",{staticClass:"navLink",attrs:{to:t.$route.path!="/"+t.$route.params.id&&"/"!=t.$route.fullPath&&"/new"!=t.$route.fullPath&&"/marked"!=t.$route.fullPath&&"/spam"!=t.$route.fullPath?"/mailbox/"+t.$route.params.id+"/new":"/new"}},[t._v("New")])],1),t._v(" "),i("li",{class:"/marked"==t.$route.path?"active":""},[i("router-link",{staticClass:"navLink",attrs:{to:t.$route.path!="/"+t.$route.params.id&&"/"!=t.$route.fullPath&&"/new"!=t.$route.fullPath&&"/marked"!=t.$route.fullPath&&"/spam"!=t.$route.fullPath?"/mailbox/"+t.$route.params.id+"/marked":"/marked"}},[t._v("Marked")])],1),t._v(" "),i("li",{class:"/spam"==t.$route.path?"active":""},[i("router-link",{staticClass:"navLink",attrs:{to:t.$route.path!="/"+t.$route.params.id&&"/"!=t.$route.fullPath&&"/new"!=t.$route.fullPath&&"/marked"!=t.$route.fullPath&&"/spam"!=t.$route.fullPath?"/mailbox/"+t.$route.params.id+"/spam":"/spam"}},[t._v("Spam")])],1),t._v(" "),i("li",{on:{click:function(e){return t.logout()}}},[i("router-link",{staticClass:"navLink",attrs:{to:"#"}},[t._v("Logout")])],1),t._v(" "),i("li",[i("div",{staticStyle:{margin:"0 0 0 20px"},attrs:{id:"email"}},[i("router-link",{staticClass:"navLink",attrs:{to:"/mailbox"}},[t._v(t._s(t.user.email+"@onyame.ml"))])],1)])]):t._e()])])])])},staticRenderFns:[]};var o={name:"app-footer",data:function(){return{count:(new Date).getFullYear()}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("div",{staticClass:"copiright"},[this._v("Personal mail client ")]),this._v(" "),e("div",{staticClass:"copiright"},[this._v(" Copyright "+this._s(this.count)+" ©")])])},staticRenderFns:[]};var c={name:"App",components:{Navbar:i("VU/8")(n,l,!1,function(t){i("JHp6")},"data-v-3f6f245a",null).exports,AppFooter:i("VU/8")(o,r,!1,function(t){i("69o7")},"data-v-3531a421",null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"min-height":"100vh",display:"flex","flex-direction":"column",overflow:"hidden"},attrs:{id:"app"}},[e("navbar"),this._v(" "),e("router-view"),this._v(" "),e("app-footer")],1)},staticRenderFns:[]},m=i("VU/8")(c,d,!1,null,null,null).exports,u=i("/ocq"),h={name:"login",data:function(){return{errors:{email:!1,password:!1,text:""},data:{email:"",password:""},loading:!1}},methods:{mailValidate:function(t){this.errors.email=!1,t.value?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]{2,}$/.test(t.value)?(t.classList.remove("invalid"),t.className+=" valid"):(t.classList.remove("valid"),t.className+=" invalid",this.errors.email=!0):(t.classList.remove("valid"),t.classList.remove("invalid"))},passwordValidate:function(t){this.errors.password=!1,t.value?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/.test(t.value)?(t.classList.remove("invalid"),t.className+=" valid"):(t.classList.remove("valid"),t.className+=" invalid",this.errors.password=!0):(t.classList.remove("valid"),t.classList.remove("invalid"))},onSubmit:function(){var t=this;if(!this.errors.email&&!this.errors.password&&this.data.email&&this.data.password){this.loading=!0;this.$http.post("/api/server_login",{email:this.data.email,password:this.data.password},{headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(e){t.loading=!1,e.body.jwt?(localStorage.setItem("jwt",e.body.jwt),localStorage.setItem("email",e.body.email),s.user=e.body,t.$router.push("/"),M.toast({html:"You are successfully logged in!"})):t.errors.text="*"+e.body.err})}}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("form",{staticClass:"login_form card-panel teal lighten-2"},[i("div",{staticClass:"title"},[t._v("Login:")]),t._v(" "),i("div",{staticClass:"input-field col s6",staticStyle:{margin:"10px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.email,expression:"data.email"}],staticStyle:{color:"rgb(71,69,84)"},attrs:{id:"login",type:"text"},domProps:{value:t.data.email},on:{input:[function(e){e.target.composing||t.$set(t.data,"email",e.target.value)},function(e){return t.mailValidate(e.target)}]}}),t._v(" "),i("label",{staticStyle:{color:"rgb(71,69,84)"},attrs:{for:"login"}},[t._v("Login")])]),t._v(" "),i("div",{staticClass:"input-field col s6",staticStyle:{margin:"10px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.password,expression:"data.password"}],staticStyle:{color:"rgb(71,69,84)"},attrs:{onblur:"",id:"password",type:"password"},domProps:{value:t.data.password},on:{input:[function(e){e.target.composing||t.$set(t.data,"password",e.target.value)},function(e){return t.passwordValidate(e.target)}]}}),t._v(" "),i("label",{staticStyle:{color:"rgb(71,69,84)"},attrs:{for:"password"}},[t._v("Password")])]),t._v(" "),t.errors.text?i("div",{staticClass:"danger"},[t._v(t._s(t.errors.text))]):t._e(),t._v(" "),i("div",{staticClass:"btn waves-effect waves-light submit",on:{click:function(e){return t.onSubmit()}}},[t._v("Submit\n      "),i("i",{staticClass:"material-icons right"},[t._v("send")])]),t._v(" "),t.loading?i("div",{staticClass:"progress"},[i("div",{staticClass:"indeterminate"})]):t._e()])])},staticRenderFns:[]};var v=i("VU/8")(h,g,!1,function(t){i("6j1F")},"data-v-e80346e8",null).exports,p={name:"app-main",data:function(){return{counter:1,msgData:[],countMsg:1,multiSelect:[],loading:!1,filter:""}},created:function(){this.getMsgs()},computed:{maxPage:function(){var t=this.countMsg-this.countMsg%20;return t/=20,this.countMsg%20&&t++,t}},methods:{markAll:function(){for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].click()},addSelect:function(t){this.multiSelect.filter(function(e){return e==t})[0]?this.multiSelect=this.multiSelect.filter(function(e){return e!=t}):this.multiSelect.push(t)},reload:function(){this.counter=1,this.multiSelect=[],this.uncheckAll(),this.getMsgs(),window.scrollTo(0,0)},clickLeft:function(){this.counter<=1||(this.counter--,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},clickRight:function(){this.counter>=this.maxPage||(this.counter++,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},getMsgs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0;var i={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-for":this.$route.params.id,"X-index":e.toString(),"X-filter":this.filter,"X-type":"default"};this.$http.get("/api/massages",{headers:i}).then(function(e){t.loading=!1,e.body&&(t.countMsg=e.body.lengthMsg,t.msgData=e.body.data)})},uncheckAll:function(){this.multiSelect=[];for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].checked=!1},delMsg:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/deleteMsg",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) deleted"}),t.getMsgs(t.counter-1))})},addToSpmam:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/addToSpam",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) added to spam"}),t.getMsgs(t.counter-1))})},mark:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/mark",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) marked"}),t.getMsgs(t.counter-1))})},read:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/read",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) marked"}),t.getMsgs(t.counter-1))})}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("div",{staticClass:"row",staticStyle:{padding:"5px"}},[i("div",{staticClass:"col s3 side"},[i("div",[t._v("New massage")]),t._v(" "),i("div",{staticClass:"functions"},[i("div",{staticClass:"item",on:{click:t.delMsg}},[t._v("Delete")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.addToSpmam}},[t._v("Mark spam")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.mark}},[t._v("Mark")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.read}},[t._v("Mark as read")])]),t._v(" "),i("div",{staticStyle:{"align-self":"center"}},[t._v("\n        "+t._s(t.multiSelect[0]?"selected: ("+t.multiSelect.length+")":"")+"\n      ")])]),t._v(" "),i("div",{staticClass:"col s9 page"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer","margin-right":"auto"},on:{click:t.markAll}},[i("i",{staticClass:"material-icons"},[t._v("done_all")])]),t._v(" "),i("div",{staticStyle:{width:"60%",margin:"6px auto",display:"flex"}},[i("i",{staticClass:"material-icons"},[t._v("search")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"validate",staticStyle:{"border-bottom":"1px solid black",height:"22px",margin:"auto",padding:"2px",cursor:"pointer"},attrs:{placeholder:"Search",id:"icon_prefix",type:"text"},domProps:{value:t.filter},on:{input:[function(e){e.target.composing||(t.filter=e.target.value)},function(e){return t.getMsgs()}]}})]),t._v(" "),i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer"},on:{click:t.reload}},[i("i",{staticClass:"material-icons"},[t._v("refresh")])]),t._v(" "),i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])]),t._v(" "),t.loading?i("div",{staticClass:"progress"},[i("div",{staticClass:"indeterminate"})]):t._e(),t._v(" "),i("div",{staticClass:"massages",attrs:{id:"msgBox"}},t._l(t.msgData,function(e){return i("div",{staticStyle:{display:"flex",width:"100%","align-items":"center"}},[i("input",{staticClass:"checkboxMsg",attrs:{type:"checkbox"},domProps:{value:e.id?e.id:""},on:{click:function(e){return t.addSelect(e.target.value)}}}),t._v(" "),i("router-link",{staticClass:"msg",class:e.read?"read":"",attrs:{to:e.id?t.$route.params.id?"/mailbox/"+t.$route.params.id+"/"+e.id:"/"+e.id:"/"}},[i("div",{staticClass:"msg-header"},[i("div",{staticClass:"header-item"},[t._v(t._s(e.from))]),t._v(" "),i("div",{staticClass:"header-item",staticStyle:{"text-align":"end",color:"rgb(16, 146, 232)"}},[t._v(t._s(e.date))])]),t._v(" "),i("div",{staticStyle:{display:"flex",overflow:"hidden","white-space":"nowrap"}},[i("div",{staticClass:"subj"},[t._v(t._s(e.subject))]),t._v(" "),e.marked?i("i",{staticClass:"material-icons"},[t._v("bookmark_border")]):t._e()])])],1)}),0),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])])])])])},staticRenderFns:[]};var _=i("VU/8")(p,f,!1,function(t){i("wQRW")},"data-v-0703c9e0",null).exports,y={name:"app-mailboxes",data:function(){return{mailboxes:[],filter:""}},created:function(){var t=this,e={"Content-Type":"application/json",authorization:localStorage.getItem("jwt")};this.$http.get("/api/mailboxes",{headers:e}).then(function(e){t.mailboxes=e.body;for(var i=0;i<t.mailboxes.length;i++)t.mailboxes[i]=t.mailboxes[i].substring(0,t.mailboxes[i].indexOf("."))})},computed:{filtered:function(){var t=this;return this.mailboxes.filter(function(e){return!t.filter||!!(e+"@onyame.ml").match(t.filter)})}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-panel teal box"},[i("div",{staticClass:"input-field col s6"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"validate",staticStyle:{"border-bottom":"1px solid black"},attrs:{id:"icon_prefix",type:"text"},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}}),t._v(" "),i("label",{staticStyle:{color:"black"},attrs:{for:"icon_prefix"}},[t._v("Filter")])]),t._v(" "),t._l(t.filtered,function(e){return i("router-link",{staticClass:"mailbox",attrs:{to:"/mailbox/"+e}},[t._v("\n    "+t._s(e+"@onyame.ml")+"\n  ")])}),t._v(" "),t.filtered[0]?t._e():i("div",[t._v("----*****No results")])],2)},staticRenderFns:[]};var k=i("VU/8")(y,x,!1,function(t){i("PwQm")},"data-v-d2cd4666",null).exports,S={name:"app-marked",data:function(){return{counter:1,msgData:[],countMsg:1,multiSelect:[],loading:!1,filter:""}},created:function(){this.getMsgs()},computed:{maxPage:function(){var t=this.countMsg-this.countMsg%20;return t/=20,this.countMsg%20&&t++,t}},methods:{markAll:function(){for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].click()},addSelect:function(t){this.multiSelect.filter(function(e){return e==t})[0]?this.multiSelect=this.multiSelect.filter(function(e){return e!=t}):this.multiSelect.push(t)},reload:function(){this.counter=1,this.multiSelect=[],this.uncheckAll(),this.getMsgs(),window.scrollTo(0,0)},clickLeft:function(){this.counter<=1||(this.counter--,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},clickRight:function(){this.counter>=this.maxPage||(this.counter++,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},getMsgs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0;var i={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-for":this.$route.params.id,"X-index":e.toString(),"X-filter":this.filter,"X-type":"marked"};this.$http.get("/api/massages",{headers:i}).then(function(e){t.loading=!1,e.body&&(t.countMsg=e.body.lengthMsg,t.msgData=e.body.data)})},uncheckAll:function(){this.multiSelect=[];for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].checked=!1},delMsg:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/deleteMsg",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) deleted"}),t.getMsgs(t.counter-1))})},addToSpmam:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/addToSpam",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) added to spam"}),t.getMsgs(t.counter-1))})},unmark:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/unmark",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) unmarked"}),t.getMsgs(t.counter-1))})},read:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/read",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) marked"}),t.getMsgs(t.counter-1))})}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("div",{staticClass:"row",staticStyle:{padding:"5px"}},[i("div",{staticClass:"col s3 side"},[i("div",[t._v("New massage")]),t._v(" "),i("div",{staticClass:"functions"},[i("div",{staticClass:"item",on:{click:t.delMsg}},[t._v("Delete")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.addToSpmam}},[t._v("Mark spam")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.unmark}},[t._v("Unmark")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.read}},[t._v("Mark as read")])]),t._v(" "),i("div",{staticStyle:{"align-self":"center"}},[t._v("\n        "+t._s(t.multiSelect[0]?"selected: ("+t.multiSelect.length+")":"")+"\n      ")])]),t._v(" "),i("div",{staticClass:"col s9 page"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer","margin-right":"auto"},on:{click:t.markAll}},[i("i",{staticClass:"material-icons"},[t._v("done_all")])]),t._v(" "),i("div",{staticStyle:{width:"60%",margin:"6px auto",display:"flex"}},[i("i",{staticClass:"material-icons"},[t._v("search")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"validate",staticStyle:{"border-bottom":"1px solid black",height:"22px",margin:"auto",padding:"2px",cursor:"pointer"},attrs:{placeholder:"Search",id:"icon_prefix",type:"text"},domProps:{value:t.filter},on:{input:[function(e){e.target.composing||(t.filter=e.target.value)},function(e){return t.getMsgs()}]}})]),t._v(" "),i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer"},on:{click:t.reload}},[i("i",{staticClass:"material-icons"},[t._v("refresh")])]),t._v(" "),i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])]),t._v(" "),t.loading?i("div",{staticClass:"progress"},[i("div",{staticClass:"indeterminate"})]):t._e(),t._v(" "),i("div",{staticClass:"massages",attrs:{id:"msgBox"}},t._l(t.msgData,function(e){return i("div",{staticStyle:{display:"flex",width:"100%","align-items":"center"}},[i("input",{staticClass:"checkboxMsg",attrs:{type:"checkbox"},domProps:{value:e.id?e.id:""},on:{click:function(e){return t.addSelect(e.target.value)}}}),t._v(" "),i("router-link",{staticClass:"msg",class:e.read?"read":"",attrs:{to:e.id?"/"+e.id:"/"}},[i("div",{staticClass:"msg-header"},[i("div",{staticClass:"header-item"},[t._v(t._s(e.from))]),t._v(" "),i("div",{staticClass:"header-item",staticStyle:{"text-align":"end",color:"rgb(16, 146, 232)"}},[t._v(t._s(e.date))])]),t._v(" "),i("div",{staticStyle:{display:"flex",overflow:"hidden","white-space":"nowrap"}},[i("div",{staticClass:"subj"},[t._v(t._s(e.subject))]),t._v(" "),e.marked?i("i",{staticClass:"material-icons"},[t._v("bookmark_border")]):t._e()])])],1)}),0),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])])])])])},staticRenderFns:[]};var b=i("VU/8")(S,C,!1,function(t){i("5g5+")},"data-v-ad6129d2",null).exports,w={name:"app-mail",data:function(){return{msg:{},chars:""}},created:function(){var t=this,e={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-for":this.$route.params.msg,"X-id":this.$route.params.id};this.$http.get("/api/massage",{headers:e}).then(function(e){e.body.err?t.$router.push({path:"/"}):(t.msg=e.body,t.msg.attachments[0]&&t.msg.attachments.forEach(function(t){console.log(t),t.content.data=new Uint8Array(t.content.data),t.content.url=URL.createObjectURL(new Blob([t.content.data]))}),t.$forceUpdate())})}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"collection msg"},[i("li",{staticClass:"collection-item"},[t._v("From: "+t._s(t.msg.from))]),t._v(" "),i("li",{staticClass:"collection-item"},[t._v("To: "+t._s(t.msg.to))]),t._v(" "),i("li",{staticClass:"collection-item"},[t._v("Subject: "+t._s(t.msg.subject))]),t._v(" "),i("li",{staticClass:"collection-item"},[t._v("Date: "+t._s(t.msg.date))]),t._v(" "),i("li",{staticClass:"collection-item"},[t._v("Post server: "+t._s(t.msg.server))]),t._v(" "),t.msg.html?i("li",{staticClass:"collection-item",domProps:{innerHTML:t._s(t.msg.html)}}):t._e(),t._v(" "),t.msg.html?t._e():i("li",{staticClass:"collection-item",domProps:{textContent:t._s(t.msg.text)}}),t._v(" "),i("li",{staticClass:"collection-item"}),t._l(t.msg.attachments,function(e){return t.msg.attachments?i("li",{staticClass:"collection-item"},[i("a",{attrs:{href:e.content.url,download:""}},[t._v(t._s(e.fileName))])]):t._e()})],2)},staticRenderFns:[]};var j=i("VU/8")(w,$,!1,function(t){i("F53Y")},"data-v-57263c42",null).exports,I={name:"app-spam",data:function(){return{counter:1,msgData:[],countMsg:1,multiSelect:[],loading:!1,filter:""}},created:function(){this.getMsgs()},computed:{maxPage:function(){var t=this.countMsg-this.countMsg%20;return t/=20,this.countMsg%20&&t++,t}},methods:{markAll:function(){for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].click()},addSelect:function(t){this.multiSelect.filter(function(e){return e==t})[0]?this.multiSelect=this.multiSelect.filter(function(e){return e!=t}):this.multiSelect.push(t)},reload:function(){this.counter=1,this.multiSelect=[],this.uncheckAll(),this.getMsgs(),window.scrollTo(0,0)},clickLeft:function(){this.counter<=1||(this.counter--,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},clickRight:function(){this.counter>=this.maxPage||(this.counter++,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},getMsgs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0;var i={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-for":this.$route.params.id,"X-index":e.toString(),"X-filter":this.filter,"X-type":"spam"};this.$http.get("/api/massages",{headers:i}).then(function(e){t.loading=!1,e.body&&(t.countMsg=e.body.lengthMsg,t.msgData=e.body.data)})},uncheckAll:function(){this.multiSelect=[];for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].checked=!1},delMsg:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/deleteMsg",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) deleted"}),t.getMsgs(t.counter-1))})},removeFromSpmam:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/removeFromSpam",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) removed from spam"}),t.getMsgs(t.counter-1))})},mark:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/mark",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) marked"}),t.getMsgs(t.counter-1))})},read:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/read",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) marked"}),t.getMsgs(t.counter-1))})}}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("div",{staticClass:"row",staticStyle:{padding:"5px"}},[i("div",{staticClass:"col s3 side"},[i("div",[t._v("New massage")]),t._v(" "),i("div",{staticClass:"functions"},[i("div",{staticClass:"item",on:{click:t.delMsg}},[t._v("Delete")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.removeFromSpmam}},[t._v("Unmark spam")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.mark}},[t._v("Mark")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.read}},[t._v("Mark as read")])]),t._v(" "),i("div",{staticStyle:{"align-self":"center"}},[t._v("\n        "+t._s(t.multiSelect[0]?"selected: ("+t.multiSelect.length+")":"")+"\n      ")])]),t._v(" "),i("div",{staticClass:"col s9 page"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer","margin-right":"auto"},on:{click:t.markAll}},[i("i",{staticClass:"material-icons"},[t._v("done_all")])]),t._v(" "),i("div",{staticStyle:{width:"60%",margin:"6px auto",display:"flex"}},[i("i",{staticClass:"material-icons"},[t._v("search")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"validate",staticStyle:{"border-bottom":"1px solid black",height:"22px",margin:"auto",padding:"2px",cursor:"pointer"},attrs:{placeholder:"Search",id:"icon_prefix",type:"text"},domProps:{value:t.filter},on:{input:[function(e){e.target.composing||(t.filter=e.target.value)},function(e){return t.getMsgs()}]}})]),t._v(" "),i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer"},on:{click:t.reload}},[i("i",{staticClass:"material-icons"},[t._v("refresh")])]),t._v(" "),i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])]),t._v(" "),t.loading?i("div",{staticClass:"progress"},[i("div",{staticClass:"indeterminate"})]):t._e(),t._v(" "),i("div",{staticClass:"massages",attrs:{id:"msgBox"}},t._l(t.msgData,function(e){return i("div",{staticStyle:{display:"flex",width:"100%","align-items":"center"}},[i("input",{staticClass:"checkboxMsg",attrs:{type:"checkbox"},domProps:{value:e.id?e.id:""},on:{click:function(e){return t.addSelect(e.target.value)}}}),t._v(" "),i("router-link",{staticClass:"msg",class:e.read?"read":"",attrs:{to:e.id?"/"+e.id:"/"}},[i("div",{staticClass:"msg-header"},[i("div",{staticClass:"header-item"},[t._v(t._s(e.from))]),t._v(" "),i("div",{staticClass:"header-item",staticStyle:{"text-align":"end",color:"rgb(16, 146, 232)"}},[t._v(t._s(e.date))])]),t._v(" "),i("div",{staticStyle:{display:"flex",overflow:"hidden","white-space":"nowrap"}},[i("div",{staticClass:"subj"},[t._v(t._s(e.subject))]),t._v(" "),e.marked?i("i",{staticClass:"material-icons"},[t._v("bookmark_border")]):t._e()])])],1)}),0),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])])])])])},staticRenderFns:[]};var T=i("VU/8")(I,B,!1,function(t){i("BdqM")},"data-v-76474f4f",null).exports,A={name:"app-new",data:function(){return{counter:1,msgData:[],countMsg:1,multiSelect:[],loading:!1,filter:""}},created:function(){this.getMsgs()},computed:{maxPage:function(){var t=this.countMsg-this.countMsg%20;return t/=20,this.countMsg%20&&t++,t}},methods:{markAll:function(){for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].click()},addSelect:function(t){this.multiSelect.filter(function(e){return e==t})[0]?this.multiSelect=this.multiSelect.filter(function(e){return e!=t}):this.multiSelect.push(t)},reload:function(){this.counter=1,this.multiSelect=[],this.uncheckAll(),this.getMsgs(),window.scrollTo(0,0)},clickLeft:function(){this.counter<=1||(this.counter--,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},clickRight:function(){this.counter>=this.maxPage||(this.counter++,this.multiSelect=[],this.uncheckAll(),this.getMsgs(this.counter-1),document.getElementById("msgBox").scrollTop=0)},getMsgs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0;var i={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-for":this.$route.params.id,"X-index":e.toString(),"X-filter":this.filter,"X-type":"new"};this.$http.get("/api/massages",{headers:i}).then(function(e){t.loading=!1,e.body&&(t.countMsg=e.body.lengthMsg,t.msgData=e.body.data)})},uncheckAll:function(){this.multiSelect=[];for(var t=0;t<document.getElementById("msgBox").children.length;t++)document.getElementById("msgBox").children[t].children[0].checked=!1},delMsg:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/deleteMsg",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) deleted"}),t.getMsgs(t.counter-1))})},addToSpmam:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/addToSpam",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) added to spam"}),t.getMsgs(t.counter-1))})},mark:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/mark",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) marked"}),t.getMsgs(t.counter-1))})},read:function(){for(var t=this,e="",i=0;i<this.multiSelect.length;i++)e+=this.multiSelect[i]+",";var a={"Content-Type":"application/json",authorization:localStorage.getItem("jwt"),"X-index":e,"X-for":this.$route.params.id};this.$http.get("/api/read",{headers:a}).then(function(e){!e.body&&e.body.err||(t.uncheckAll(),M.toast({html:"Massage(s) marked"}),t.getMsgs(t.counter-1))})}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("div",{staticClass:"row",staticStyle:{padding:"5px"}},[i("div",{staticClass:"col s3 side"},[i("div",[t._v("New massage")]),t._v(" "),i("div",{staticClass:"functions"},[i("div",{staticClass:"item",on:{click:t.delMsg}},[t._v("Delete")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.addToSpmam}},[t._v("Mark spam")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.mark}},[t._v("Mark")]),t._v(" "),i("div",{staticClass:"item",on:{click:t.read}},[t._v("Mark as read")])]),t._v(" "),i("div",{staticStyle:{"align-self":"center"}},[t._v("\n        "+t._s(t.multiSelect[0]?"selected: ("+t.multiSelect.length+")":"")+"\n      ")])]),t._v(" "),i("div",{staticClass:"col s9 page"},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer","margin-right":"auto"},on:{click:t.markAll}},[i("i",{staticClass:"material-icons"},[t._v("done_all")])]),t._v(" "),i("div",{staticStyle:{width:"60%",margin:"6px auto",display:"flex"}},[i("i",{staticClass:"material-icons"},[t._v("search")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"validate",staticStyle:{"border-bottom":"1px solid black",height:"22px",margin:"auto",padding:"2px",cursor:"pointer"},attrs:{placeholder:"Search",id:"icon_prefix",type:"text"},domProps:{value:t.filter},on:{input:[function(e){e.target.composing||(t.filter=e.target.value)},function(e){return t.getMsgs()}]}})]),t._v(" "),i("div",{staticStyle:{margin:"5px 10px 0 0",cursor:"pointer"},on:{click:t.reload}},[i("i",{staticClass:"material-icons"},[t._v("refresh")])]),t._v(" "),i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])]),t._v(" "),t.loading?i("div",{staticClass:"progress"},[i("div",{staticClass:"indeterminate"})]):t._e(),t._v(" "),i("div",{staticClass:"massages",attrs:{id:"msgBox"}},t._l(t.msgData,function(e){return i("div",{staticStyle:{display:"flex",width:"100%","align-items":"center"}},[i("input",{staticClass:"checkboxMsg",attrs:{type:"checkbox"},domProps:{value:e.id?e.id:""},on:{click:function(e){return t.addSelect(e.target.value)}}}),t._v(" "),i("router-link",{staticClass:"msg",class:e.read?"read":"",attrs:{to:e.id?"/"+e.id:"/"}},[i("div",{staticClass:"msg-header"},[i("div",{staticClass:"header-item"},[t._v(t._s(e.from))]),t._v(" "),i("div",{staticClass:"header-item",staticStyle:{"text-align":"end",color:"rgb(16, 146, 232)"}},[t._v(t._s(e.date))])]),t._v(" "),i("div",{staticStyle:{display:"flex",overflow:"hidden","white-space":"nowrap"}},[i("div",{staticClass:"subj"},[t._v(t._s(e.subject))]),t._v(" "),e.marked?i("i",{staticClass:"material-icons"},[t._v("bookmark_border")]):t._e()])])],1)}),0),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticStyle:{margin:"5px"}},[t._v("\n          "+t._s(t.counter)+" of "+t._s(t.maxPage)+"\n        ")]),t._v(" "),i("div",{staticClass:"arrows"},[i("i",{staticClass:"material-icons",on:{click:t.clickLeft}},[t._v("chevron_left")]),t._v(" "),i("i",{staticClass:"material-icons",on:{click:t.clickRight}},[t._v("chevron_right")])])])])])])},staticRenderFns:[]};var X=i("VU/8")(A,P,!1,function(t){i("uCAj")},"data-v-356bc3e8",null).exports;var E=function(t,e,i){var a,s,n;a="/api/get_admin",s=function(t){t.success?i(!0):i(!1)},(n=new XMLHttpRequest).onreadystatechange=function(){4==n.readyState&&200==n.status&&s(JSON.parse(n.responseText))},n.open("GET",a,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Authorization",localStorage.getItem("jwt")),n.send(null)};var L=i("8+8L");a.a.use(u.a),a.a.use(L.a);var R=new u.a({mode:"history",routes:[{path:"/login",name:"login",component:v},{path:"/",name:"app-main",component:_},{path:"/new",name:"app-new",component:X},{path:"/marked",name:"app-marked",component:b},{path:"/spam",name:"app-spam",component:T},{path:"/mailbox",name:"app-mailboxes",component:k,beforeEnter:E},{path:"/mailbox/:id",name:"app-mailbox",component:_,beforeEnter:E},{path:"/mailbox/:id/new",name:"app-mailbox-new",component:X,beforeEnter:E},{path:"/mailbox/:id/marked",name:"app-mailbox-marked",component:b,beforeEnter:E},{path:"/mailbox/:id/spam",name:"app-mailbox-spam",component:T,beforeEnter:E},{path:"/:id",name:"msg",component:j},{path:"/mailbox/:msg/:id",name:"msg",component:j,beforeEnter:E},{path:"*",name:"404",redirect:"/"}]});R.beforeEach(function(t,e,i){var a,n,l;"/login"!=t.fullPath||s.user||localStorage.getItem("jwt")?s.user&&!localStorage.getItem("jwt")?(s.user={},i("/login")):localStorage.getItem("jwt")&&s.user?"/login"==t.fullPath?i(e.fullPath):i(!0):localStorage.getItem("jwt")?(a="/api/authorization",n=function(a){a.success?(localStorage.setItem("email",a.user.email),s.user=a.user,"/login"==t.fullPath?"/login"==e.fullPath?i("/"):i(e.fullPath):i(!0)):(localStorage.removeItem("jwt"),i("/login"))},(l=new XMLHttpRequest).onreadystatechange=function(){4==l.readyState&&200==l.status&&n(JSON.parse(l.responseText))},l.open("GET",a,!0),l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Authorization",localStorage.getItem("jwt")),l.send(null)):i("/login"):i(!0)});var z=R;a.a.config.productionTip=!1,new a.a({el:"#app",router:z,components:{App:m},template:"<App/>"})},PwQm:function(t,e){},uCAj:function(t,e){},wQRW:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.25e9917c95e014c0e29b.js.map